pipeline {
    agent none
    stages {
        stage('Test') {
            agent { dockerfile true }
            steps {
                echo 'Test start?'
                shell "docker run -t -i --name centos7.4-base centos7.4-base /bin/bash"
                sh 'pwd'
                sh 'ls'
            }
        }
        stage('Test1'){
            steps {
                echo 'Test1 start?'
            }
        }
        stage('Test2'){
            steps{
                echo 'Test2 start?'
            }
        }
    }
    post {
        always {
            echo 'I will always say Hello again!'
        }
    }
}
